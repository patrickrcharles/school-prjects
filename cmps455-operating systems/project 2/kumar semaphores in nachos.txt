How to use semaphores in Nachos
by Ashok Kumar - Thursday, 4 February 2016, 8:43 PM
 	
i) Semaphores in NachOS take two parameters (a name and a threshold or resource count) for their parameterized constructors.


int threshold;

Semaphore mySemaphore = new Semaphore ("useful name for debugging",  threshold);

/*note: threshold is the number of times the Wait() can be called before putting threads to sleep*/


SYNTAX
II) Because semaphores in NachOS do not have a default constructor a single pointer implementation of an array will cause errors. So use double pointers.

Semaphore **mySemaphores; 
/* this is how to declare a double pointer array; it is an array of pointers; the rest of the above example code is still valid. */

Initializing the array of Semaphore pointers in the array:

mySemaphores = new Semaphore*[100];
/* This is now an array of semaphore pointers; where each pointer has not been initialized */

for (int i = 0; i < 100; i++)
{
mySemaphores[i] = new Semaphore("Debugging Name", 1); 
// Each of the 100 elements in this array will now be initiailized to a value of 1.
}